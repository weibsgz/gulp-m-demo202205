/*! xcar_touch - v1.0.0 - */!function(a,b){"function"==typeof define&&define.cmd?define("jxcar",function(){return b(a)}):b(a)}(window,function(a){function b(a){a.src="about:blank";try{a.contentWindow.document.write("")}catch(b){}a.parentNode.removeChild(a)}function c(){var a={1:5,2:1,3:2,4:3,5:4},b={simpleUploader:function(a,b){return m.requestImage(a,b)},share:function(b,c){var d=b.data,e=a[b.shareType];(1==e||3==e||4==e)&&(d.message="双11上爱卡，钜惠直播，精彩视频，品牌盲盒，特惠购车");var f={shareType:e,hasContent:!0,title:d.title,content:d.message,imageUrl:d.imageUrl,linkUrl:d.targetUrl};return m.requestShare(f,function(a){a.shareType=b.shareType,console.log(a),c(a)})},login:function(a,b){return m.requestLogin(a,b)},requestInfo:function(a,b){return m.requestCookie(a,b)},userInfo:function(a){if(j)return m.requestUserInfo(a);var b="appxcar://m.xcar.com.cn.personal?params="+encodeURIComponent(JSON.stringify(a));location.href=b},shareInfo:function(a,b){var c=a.data,d={hasContent:!0,title:c.title,content:c.message,imageUrl:c.imageUrl,linkUrl:c.targetUrl};m.off("requestShare").on("requestShare",function(a){(1==a||3==a||4==a)&&(d.content="双11上爱卡，钜惠直播，精彩视频，品牌盲盒，特惠购车"),a&&(d.shareType=a,m.requestShare(d,b))}),m.onLoadSuccess&&m.onLoadSuccess({isShareEnable:!0})}};for(var c in b)m[c]=b[c];m.onLoadSuccess&&m.onLoadSuccess({isShareEnable:!1})}var d=a;if(d.xcarjsapi)return d.xcarjsapi;var e,f=d.document,g=navigator.userAgent,h=/(Android);?[\s\/]+([\d.]+)?/.test(g),i=g.match(/appxcar(\/([\d\.]+))*/),j=g.match(/xcar_gh(\/([\d\.]+))*/);i&&(e=+(i[2]?i[2]:"1.0")),j&&(e="2.0");var k="__jxcar__iframe__",l=1,m=d.xcarjsapi={schema:"appxcar://m.xcar.com.cn?",version:"2.0",jsApiList:[]};j&&(m=d.xcarjsapi={schema:"schema://m.xxxx.com.cn?",version:"2.0",jsApiList:[]}),m.Deferred=function(){};var n="stableCallBack",o=m.events={},p=m.on=function(a,b){var c=o[a]||(o[a]=[]);return c.push(b),m},q=m.off=function(a,b){a||b||(o={});var c=o[a];if(c)if(b)for(var d=c.length-1;d>=0;d--)c[d]===b&&c.splice(d,1);else delete o[a];return m},r=m.emit=function(a,b){var c,d=o[a];if(d)for(d=d.slice();c=d.shift();)c(b);return m};return m.debug=!1,m.jsCallMethod=function(a,b){var c=m.schema,d=a.action,e=a.param&&encodeURIComponent(JSON.stringify(a.param)),g=c+"action="+d+(e?"&param="+e:"")+"&unique="+l+"&callback="+n;if("function"==typeof m.debug&&m.debug(a),h&&i)b&&p(d+"."+l,b),console.log(g);else{b&&p(d+"."+l,b);var j=f.createElement("iframe");j.style.display="none",j.id=k+l,j.src=g,f.documentElement.appendChild(j)}l++},m.jsCallMethodIfy=function(a,b){var c="schema://xcar.jsbridge?",d=a.action,e=a.param&&encodeURIComponent(JSON.stringify(a.param)),g=f.getElementById(k);g||(g=f.createElement("iframe"),g.style.display="none",g.id=k,f.documentElement.appendChild(g)),g.src=c+"action="+d+(e?"&param="+e:"")+"&unique="+l,"function"==typeof m.debug&&m.debug(a),b&&p(d+"."+l,b),l++},d[n]=m.jsCallBack=function(a){"function"==typeof m.debug&&m.debug(a);var c=a,d=c.action,e=c.unique;e?(r(d+"."+e,c.data),q(d+"."+e)):r(d,c.data);var f=document.getElementById(k+e);f&&b(f)},m.isSupport=function(){return a.navigator.userAgent.indexOf("appxcar")>-1||a.navigator.userAgent.indexOf("xcar_gh")>-1},m.ready=function(a){var b="register",d=m.jsCallMethod;2>e&&(b="jsApiList",d=m.jsCallMethodIfy,m.version=e),d({action:b},function(b){m.jsApiList=b;for(var f in b){var g=b[f];m[g]=function(a){return function(){var b,c,e=m.Deferred(),f=Array.prototype.slice.call(arguments);"function"==typeof f[0]?(b={},c=f[0]):(b=f[0],c=f[1]);var g=a;return d({action:g,param:b},function(a){c&&c(a),e&&e.resolve(a)}),e?e.promise():void 0}}(g)}e>=2&&c(),a&&a(b)})},m});